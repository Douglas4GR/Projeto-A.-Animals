@page "/fichaavaliador"
@using BlazorStrap
@using System.Security
@using Microsoft.AspNetCore.Components.Forms
@using HttpClientService
@using Microsoft.AspNetCore.Authorization
@using RH.Models
@using AvaliacaoServidorBlazor.Client.Pages
@inject IBlazorStrap _blazorStrap
@inject ClientApiImportacaoAvaliacao clientImportacao
@rendermode InteractiveAuto
@attribute [Authorize]

<!--Tela de ficha de avaliação em 10/04/2024-->

<div class="card mb-4">
    <div class="card-body">
        <div class="card-title Ghotam">
            <h2 class="text-center border-left 15px">Ficha de Avaliação Periódica Especial de Desempenho</h2>
        </div>
        <h2 class="text-light bg-primary d-flex align-items-center justify-content-between px-3">
            IDENTIFICAÇÃO
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 25 16">
                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0" />
                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1" />
            </svg>
        </h2>

        <div class="table-responsive">
            <table class="table mt-3 algin-middle bg-light rounded">
                <tr class="text-left bg-info">
                    <th>Nome: <label>Fulano da Silva</label></th>
                    <th>Id Func.: <label>12345678</label></th>
                    <th>Data de Início do Exercício: <label>04/03/2007</label></th>
                    <th>Carreira: <label>QD SPL</label></th>
                </tr>
                <tr class="text-left bg-info">
                    <th>Cargo: <label>ARTIFICIE</label></th>
                    <th>Disciplina/Área: <label>ELETRICISTA AUTO</label></th>
                    <th>Área de Atividade: <label>ADMINISTRATIVA</label></th>
                    <th>Unidade de Lotação - UA: <label>DIVISÃO DE TRANSPORTE</label></th>
                </tr>
                <tr class="text-left bg-info">
                    <th>Telefone da UA: <label>(xx) xxxx-xxxx</label></th>
                    <th>Período: <label>01/03/2021</label> a <label>07/01/2023</label></th>
                    <th></th>
                    <th></th>
                </tr>
            </table>
        </div>
    </div>
</div>

<div class="card col-8 align-self-center mx-auto d-block text-center  mb-3">
    <div class="card-body">
        <EditForm Model="avaliacao" OnValidSubmit="ActivateModalAsync">
            <DataAnnotationsValidator />
            <h2 class="ml-15 text-light bg-primary d-flex align-items-center justify-content-between px-3">
                AVALIAÇÃO
                <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-clipboard2-check-fill" viewBox="0 0 25 16">
                    <path d="M10 .5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5.5.5 0 0 1-.5.5.5.5 0 0 0-.5.5V2a.5.5 0 0 0 .5.5h5A.5.5 0 0 0 11 2v-.5a.5.5 0 0 0-.5-.5.5.5 0 0 1-.5-.5" />
                    <path d="M4.085 1H3.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1h-.585q.084.236.085.5V2a1.5 1.5 0 0 1-1.5 1.5h-5A1.5 1.5 0 0 1 4 2v-.5q.001-.264.085-.5m6.769 6.854-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708" />
                </svg>
            </h2>
            <div class="container-fluid">
                <div class="col-8 table-responsive align-self-center mx-auto d-block text-center">
                    <table class="table table-bordered">
                        <thead class="Ghotam text-center">
                            <tr>
                                <th class="col-2">Fatores</th>
                                <th class="col-2">Descrição</th>
                                <th class="col-4">Nota</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">I. Assiduidade</td>
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Comparecimento diário ao local de trabalho para o cumprimento de suas atribuições">
                                        Frequência <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Frequencia">
                                        <option value="0">Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Frequencia)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Observância dos horários estabelecidos para o cumprimento de suas atribuições">
                                        Pontualidade <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Pontualidade">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Pontualidade)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">II. Disciplina</td>
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Capacidade para observar e cumprir as normas e regulamentos">
                                        Cumprimento <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Cumprimento">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Cumprimento)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Observância do contato cordial, respeito à individualidade, acompanhamento e retorno aos solicitantes dos serviços de sua responsabilidade">
                                        Atendimento <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Atendimento">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Atendimento)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">III. Iniciativa/Criaticidade</td>
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Capacidade para se antecipar aos fatos e empreender alternativas inovadoras no desenvolvimento de suas atividades e para a solução de problemas de trabalho">
                                        Entenda <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Criatividade">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Criatividade)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td rowspan="3" class="align-middle">IV. Qualidade do trabalho</td>
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Pronto atendimento às solicitações e grau de precisão dispensados às atividades sob sua responsabilidade">
                                        Presteza <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Presteza">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Presteza)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Empenho demonstrado em conhecer as atividades relacionadas com os objetivos de sua área de trabalho, delas participar e nelas se envolver">
                                        Interesse <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Interesse">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Interesse)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Disponibilidade em colaborar voluntariamente com colegas ou grupos, atendendo às solicitações do trabalho">
                                        Cooperação <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Cooperacao">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Cooperacao)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">V. Responsabilidade</td>
                                <td class="align-middle text-start">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Nível de atenção demonstrada no cumprimento de suas atribuições, na observância dos prazos e no alcance dos resultados estabelecidos">
                                        Compromisso <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Compromisso">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Compromisso)" />
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Cuidado na guarda de documentos e informações institucionais, como também na conservação de bens sob sua responsabilidade">
                                        Zelo <img src="bootstrap/interrogacao.svg" alt="detalhes" width="20" height="20" />
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <select class="form-select" aria-label="Default select example" @bind="avaliacao.Zelo">
                                        <option value="0" selected>Escolha a nota</option>
                                        <option value="1">1 - Não atendeu às expectativas</option>
                                        <option value="2">2 - Atendeu parcialmente às expectativas</option>
                                        <option value="3">3 - Atendeu às expectativas</option>
                                        <option value="4">4 - Superou às expectativas</option>
                                    </select>
                                    <ValidationMessage For="@(() => avaliacao.Zelo)" />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="row px-3">
                <div class="col-6 border py-2">
                    <h4>Total de pontos Obtidos: @avaliacao.ListaPontuacoesAvaliacao.Sum()</h4>
                </div>
                <div class="col-6 border py-2">
                    <h4>Houve um total de @avaliacao.ListaPontuacoesAvaliacao.Sum()</h4>
                </div>
            </div>
            <div class="row px-3 py-3 border bg-light">
                <p>Caso um ou mais fatores tenham sido avaliados como não atendendo às expectativas, que medidas foram tomadas, no período, para a melhoria de desempenho do servidor ?</p>
                <div class="col align-self-center">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" aria-label="Exemplo do tamanho do input" aria-describedby="inputGroup-sizing-default">
                    </div>
                </div>
            </div>
            <div class="row px-3 mt-1 border bg-light">
                <p>Campo para uso exclusivo do avalidador</p>
            </div>
            <div class="row px-3 py-3 border bg-light">
                <h6>INFORMAÇÕES SOBRE OCORRÊNCIAS RELEVANTES REGISTRADAS NO CICLO AVALIATIVO</h6>
                <div class="col align-self-center">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" aria-label="Exemplo do tamanho do input" aria-describedby="inputGroup-sizing-default">
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <BSButton Type="Submit" Color="BSColor.Primary">CONFIRMAR AVALIAÇÃO</BSButton>
            </div>
        </EditForm>
    </div>


        <!--modal de confirmação-->
        <BSModal @ref="modalPontosAvaliacao" DataId="modal" Size="Size.Large">
            <Header>AVALIAÇÃO</Header>
            <Content>
                <div class="col-12 table-responsive align-self-center mx-auto d-block text-center">
                    <table class="table table-bordered">
                        <thead class="Ghotam text-center">
                            <tr>
                                <th class="col-2">Fatores</th>
                                <th class="col-2">Descrição</th>
                                <th class="col-4">Nota</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">I. Assiduidade</td>
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Comparecimento diário ao local de trabalho para o cumprimento de suas atribuições">
                                        Frequência
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Frequencia</p>
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Observância dos horários estabelecidos para o cumprimento de suas atribuições">
                                        Pontualidade
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Pontualidade</p>
                                </td>
                            </tr>

                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">II. Disciplina</td>
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Capacidade para observar e cumprir as normas e regulamentos">
                                        Cumprimento
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Cumprimento</p>
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Observância do contato cordial, respeito à individualidade, acompanhamento e retorno aos solicitantes dos serviços de sua responsabilidade">
                                        Atendimento
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Atendimento</p>
                                </td>
                            </tr>


                            <tr class="text-center border">
                                <td class="align-middle">III. Iniciativa/Criatividade</td>
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Capacidade para se antecipar aos fatos e empreender alternativas inovadoras no desenvolvimento de suas atividades e para a solução de problemas de trabalho">
                                        Entenda
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Criatividade</p>
                                </td>
                            </tr>

                            <tr class="text-center border">
                                <td rowspan="3" class="align-middle">IV. Qualidade do trabalho</td>
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Pronto atendimento às solicitações e grau de precisão dispensados às atividades sob sua responsabilidade">
                                        Presteza
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Presteza</p>
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Empenho demonstrado em conhecer as atividades relacionadas com os objetivos de sua área de trabalho, delas participar e nelas se envolver">
                                        Interesse
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Interesse</p>
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Disponibilidade em colaborar voluntariamente com colegas ou grupos, atendendo às solicitações do trabalho">
                                        Cooperação
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Cooperacao</p>
                                </td>
                            </tr>

                            <tr class="text-center border">
                                <td rowspan="2" class="align-middle">V. Responsabilidade</td>
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Nível de atenção demonstrada no cumprimento de suas atribuições, na observância dos prazos e no alcance dos resultados estabelecidos">
                                        Compromisso
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Compromisso</p>
                                </td>
                            </tr>
                            <tr class="text-center border">
                                <td class="align-middle">
                                    <span class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" title="Cuidado na guarda de documentos e informações institucionais, como também na conservação de bens sob sua responsabilidade">
                                        Zelo
                                    </span>
                                </td>
                                <td class="align-middle">
                                    <p>@avaliacao.Zelo</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </Content>
            <Footer Context="modal">
                <BSButton MarginStart="Margins.Auto" Color="BSColor.Danger" @onclick="modal.HideAsync">Cancelar</BSButton>
                <BSButton Color="BSColor.Success">Confirmar</BSButton>
            </Footer>
        </BSModal>
        <div class="mt-3">
        </div>
    </div>


@code
{
    // Declaração da referência ao modal
    BSModal? modalPontosAvaliacao;

    // Instância da classe Avaliacao
    Avaliacao avaliacao = new Avaliacao();

    // Função para ativar a exibição do modal após a validação
    private async Task ActivateModalAsync()
    {
        // Chama o método Show() para ativar o modal
        await modalPontosAvaliacao!.ShowAsync();
    }
}